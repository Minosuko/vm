/* FIRMWARE UPDATE SCRIPT */

# Backup disk
BAKF

# Some var
SET line = "\n"

# Disk Master Boot Record
# 512 byte
# base64 encoded
SET dmbr = "WzNXfiQxZTVBOxo3bloyQBFoXWJ/KUI7Ww5ETTQgQ1lTCFA4KA8pNFdcJWpkYxleIGwSamInE1gLAzFIFl1wMGgmVzEYHl4kVnJ6bhMhUjMgDFdOLGYhEiIQfExNEzIFOlMQWApNQww1SEpYbhl4N0QvVnZoGg1MAF9fNiNOZhANIE9rbW1KCyVWFVlOThRWOHYrLUcvACk2BQtGEzZUcFUwAV8XLDoxLFsedQRSfhZsHDcqUVNLNX1FIkpIexEqcQwRI2wPPVV6Qjt+QltSRjRZXylAWigQCGRTPxgXQmw2CgcyJ0M2fjofYE8/SWxjAQRLBFJlN2kVPm0rKQB/GkFQOgFLCD5SCAI8VAAPLTQ0VHFLHwBAH08pMAU+OkUAOV4ob1YYXhdRMmxhR3VJBwkaUEMWRi05VR1RMTMOMntKa1gDShkDYgBTCS8aW19TP1IyQj4hMDcQC09QAVkgN2hOKRxEQj5bEj5nSQ9LUEVNN29xFQ0WYEk2PyomAVVdGTMNLSpNbkcnKl9KUj9LN2wsJx9EL14qbRhTBF8bFSAeUwYyBzI3V1dNQxZYIhMuV2RGQntTKwIVCCQIcSAgMCspODorWkReJkUdNVIbVisqdVZQUlVDIgB7LQspPm8+X1Y1Lx4gCgs1EjcbA3wzMHB4ISR7DmwLNFMlQ3ATWiU"

# Decode DMBR
B64D dmbr

ECHO "Writting Disk Master Boot Record...VAR:line:"
# WRITE DMBR
WRITE_DMBR VAR:dmbr:

# Boot manager
# Base64 encoded
SET BOOTMGR = "WzNXfiR4NnBDWlQ3Pz5DCE8bWQ5pVjxLLAFTOC9BRk9TVQwmQBoxQ0NlDwQBFWlXLhEGAxczKnJlZkc4Al19TH4wN3NdGVY3JBsyNg4hSkwnFzs2LHlSaToDFEFYCk9JYh1SMn5DRQouX0NCAFszNkI1FFwMDQxAdElcMEQuFwd0RFVDGG8CQihafTQiIxZCJBgtX08iGzM2CnE9byUvAjkdOgszRCIkPVYDDSkkD0Q1HzZETTFbPh89TU9DHgozBx8CIh8BIU9nQyRvOioiRzIjJFEhQjMKFQFCRw4BLQE5AxohPiYrTxc0A0ZYPQVWIi8vAERsNzhTfD0GEiA4RSlPNxYjIUU0JSoxRBwCSCdSTBEqCW8/HUxbKAEgO0cdRztWFy4LXGU0OBEFMxBRQkYSJUgNIzErUgFRLVJnQm06KXIAXB8PYn1MEi8MRjFQUDkySDUnI19ra1oxDCd0aD1tWnI6VzdVFF8JWB9XQVwqOg8eDBgID0o9NSxCFF9LDyUHO08zbidZSzpTLCBOLA5POBVIKF4zbRRZHkQLFjgRORUhCkkJLj0fCxZKTworQH45L2NFIEQ+LRV1Lx4ADxoIXS8nPyg1Jk8WM0F/IzMoBylcTVFDOEg9UxAvLgpDQUsiPmNfAwEoCD8QXFYbCkobZANTRS5YXkpEVAk3LydxMAc9NHs7fgpvSiwJKAhQFxAtbHobe3h2ND1SVEo+YiFEM3p+MSsFZHQWPDkDcT8KBR9SckIpKhATBTUdeykJQlh8EnpCKyQiI3JZQgoPTkgaQQJYI0EMNygnCi5HQWsOEFs2OQUZID1aN0tPXg8RVkE4RCYDWSRVbBMOQBgpKRo9RBxcJAQHDgE9KQJ5MhMOMnQZCSkscFtrFjEqPmNDJWY1RD8/YVcMU0oyUFcJLnUeDSw1LERdFw8LXkULOjZwJG1rP34/Py84TzwuEj8EB2JzaDxpGUgoAgcBGmo8WycvIW02TB5mITglcCFIOyhuQWwzVVMhWToqI1JtS1pVAVJeQHh/IB8YRyNuFCg1PF1COScuTkBDFUEEJjZSby5DXUsJJEIfED9TFgMQBS4TbTMeUBU8ITICQRRNVk8wehcIfClDdhRKB0F8AgI4Rg0hWTdQCnEQWX84TDxEOi1sR1I0CDpQQxAaCzNRTEYIaSY3Bx4UcSA7dT8MGywtJjRFUyovWSJdAjcVKygwd0gMJyJmdkIgADAeCFxPDzQnCCwgdSJCITkSaREHPWZNLFpMBBBKJFc8HGg9KFACN01bI00aWExQdARIUGlWRRRbASgAA0FIHmZbYio/MDI/Khc8MXIaVzkLIStRUBNJNT8cVTY0NypdOStILTJWAzZhIiUWPTBKZy5galc7Znx9FSMsPV01OzoICDQ6BUI6NkI+OkUWMwEyLWlLOxtUFEcPGmQeEU9TGTleUlBeWU1OChAWN2dAbzELSVFwJFozQR4+Vjojfj0CN00pCFBGLxo/Ek8GZU4NK1cgIw8zSgt3RkMaXUUrLjATEC1cK1tRZwsVVU0tf0lYXApiTQNXBToPJRROIy4cKkI+Xn5GMEVjGBUrZRYiLC5GKzsyP3cGNyc6KDxTVSwtASkRKTdESGJ8LzpCSzgiIDYvZBk3SRp2RgxMSBpOIAkJE0A0CVI3J1pic0xUUS8wcEFbLxkcWiIkTHM9LFYwXDUfXSV+KRUQNnk4MSgIfFpNRyl7FnBjfm90EA8pTA0Oc2UgI3okPhlIFh5KJh8GJDddTDFVTTo9QCMaKVItFVVJIWQmXk8KKSpiUCYOKDcJU29iXj0NAwFePRUkFzVaCjNQQVlcT19PXEwbWGpe"

# Decode Bootmgr
B64D BOOTMGR

ECHO "Writting Boot Manager to disk...VAR:line:"
# Write to file on disk
SYSFILEWRITE "BOOTMGR" CONTENTS "VAR:BOOTMGR:"


# Boot Manager
# Base64 encoded
SET KERNEL = "WzNXfiR4NnBDWlQ3Pz5DCE8bWQ5pbAdyDQFmZWEVW1JRJz8TBC8reGs7QANkHno6MgMaCBtKWhd4e0VKZyJwTwFQN3NdGVY3JA9BUB8mT0csETM2LHlSaUdyZk1UEk9JYlUbWREoIhMlSEEnADQ+PUYjXBJkDgNRbnp4H2haaktGOzMnEBl9XiJaEkIiIxZCKAQ1PlYkASIxDwteDjcraiNMbkUAP1IlJSl+ECohCFYpHideMidcNAVRR01PFHhOAiMjBTMjTw01DHI7cDphD1VcWTMCZxR1NjZ5EzQgFisJbzgPHgZXRhc0emJuESk4TW1hDCJxUExaEV8LFCBWMS5CPgEuJVYzTVc4SBoBQi81VmdWZm82F1szOXJYX0YbVzNGFjN0PxEjNhp3OBZVAGx2I389dwsLMypwHWc0Em0fFXJzK3ciKysgLRwnexp0BBcTOhYNCxRrE00iZHFxbzYyQl0LVi5UFT4kKwRLJE1SIA4OBRkKAysbfXRbF1RafA5oMSAuHEApIUc4WSIiCiJ+ATI3WSVHb3BIFF9/MxkgCCQsZyhmTVcCABEkOBMuV2RtYTEGYF5eXwYbWxoIDwwFSys3P1U1Jk8WM0ECQCokGEhNQktYOF0kPHNdSm1KRUFdFC1wPTBAZEEZCRkeAEINCh8yHiM9QkAnTgwqLkRzFW9DF00BHWs0XEgFWBQ3YQc+BCwbe205YlklLSJOJGpqOUpvJS0XdGJESCcjTWwmMjQrDTVSVQVyMncUcTIYHUV1FGJleRlEOQQrInIvdBgienw9SD1+WwUcXi4FCiQUPHsNEnlsOjY/JiZLTwgaN1tdJjAPVT0qHRkUWwgqMRVXVw8uTSA7NCBIXEFdIgcSSzgVHyl1JyIEDwINESY8IB8hIjI8BEAKWkEyUEUtCCoUF3wBbi9Pbn1+KVIYSFNXCFFAQBBbOSM0RUNAHxEvNkonShdILjc7PzAxU1oZJFVQShA/TgMYCA4HWlpOEQMXCUAfMCpeKVsmKSYs"

# Decode Bootmgr
B64D KERNEL

ECHO "Writting KERNEL to disk...VAR:line:"
# Write to file on disk
SYSFILEWRITE "KERNEL" CONTENTS "VAR:KERNEL:"

/* EXEC */
# Base64 encoded
SET EXEC = "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"

# Decode Bootmgr
B64D EXEC

ECHO "Writting BIN::DUMP to disk...VAR:line:"
# Write to file on disk
NORFILEWRITE "BIN::DUMP" CONTENTS "VAR:EXEC:"
